<!doctype html><html><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>How I setup Kali Linux</title><link rel="shortcut icon" href=https://schmid7k.github.io/s-for-security/images/favicon.png type=image/png><meta name=description content="Tips, tricks and write ups for Capture the Flag challenges."><meta name=keywords content="writeups,penetration-testing,cybersecurity,tryhackme,hackthebox"><meta name=referrer content="no-referrer-when-downgrade"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://schmid7k.github.io/s-for-security/css/screen.css><link rel=stylesheet href=https://schmid7k.github.io/s-for-security/css/fonts.css type=text/css><link rel=stylesheet href=https://schmid7k.github.io/s-for-security/fork-awesome/css/fork-awesome.min.css type=text/css><meta property="og:title" content="How I setup Kali Linux"><meta property="og:description" content="Every tinkerer is only as good as his tools.
This post emphasizes on how I setup my Kali Linux virtual machine, which will be used for all CTF challenges showcased on this website.
Step 1) Download Download an official Kali Linux VM image from Kali.org.
Since I am using VirtualBox I am using the VirtualBox 64-bit image of Kali Linux. Make sure to pay attention to the text above the download that says These images have the default credentials &ldquo;kali/kali&rdquo;."><meta property="og:type" content="article"><meta property="og:url" content="https://schmid7k.github.io/s-for-security/posts/general/howtosetupkali/"><meta property="og:image" content="https://schmid7k.github.io/s-for-security/images/cover-image.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-10T18:57:04+01:00"><meta property="article:modified_time" content="2022-03-10T18:57:04+01:00"><meta property="og:site_name" content="S for Security"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://schmid7k.github.io/s-for-security/images/cover-image.jpg"><meta name=twitter:title content="How I setup Kali Linux"><meta name=twitter:description content="Every tinkerer is only as good as his tools.
This post emphasizes on how I setup my Kali Linux virtual machine, which will be used for all CTF challenges showcased on this website.
Step 1) Download Download an official Kali Linux VM image from Kali.org.
Since I am using VirtualBox I am using the VirtualBox 64-bit image of Kali Linux. Make sure to pay attention to the text above the download that says These images have the default credentials &ldquo;kali/kali&rdquo;."><meta itemprop=name content="How I setup Kali Linux"><meta itemprop=description content="Every tinkerer is only as good as his tools.
This post emphasizes on how I setup my Kali Linux virtual machine, which will be used for all CTF challenges showcased on this website.
Step 1) Download Download an official Kali Linux VM image from Kali.org.
Since I am using VirtualBox I am using the VirtualBox 64-bit image of Kali Linux. Make sure to pay attention to the text above the download that says These images have the default credentials &ldquo;kali/kali&rdquo;."><meta itemprop=datePublished content="2022-03-10T18:57:04+01:00"><meta itemprop=dateModified content="2022-03-10T18:57:04+01:00"><meta itemprop=wordCount content="1438"><meta itemprop=image content="https://schmid7k.github.io/s-for-security/images/cover-image.jpg"><meta itemprop=keywords content><body><main class="content page-template page-" role=main><article class="post page"><header class=post-header><a id=blog-logo href=/s-for-security/>S for Security</a></header><h1 class=post-title>How I setup Kali Linux</h1><section class=post-content><p><em>Every tinkerer is only as good as his tools.</em></p><p>This post emphasizes on how I setup my Kali Linux virtual machine, which will be used for all CTF challenges showcased on this website.</p><h4 id=step-1-download>Step 1) Download</h4><p>Download an official Kali Linux VM image from <a href=https://www.kali.org/get-kali/#kali-virtual-machines>Kali.org</a>.</p><p>Since I am using VirtualBox I am using the VirtualBox 64-bit image of Kali Linux. Make sure to pay attention to the text above the download that says <em>These images have the default credentials &ldquo;<strong>kali/kali</strong>&rdquo;</em>. Keep that in mind, because you will need the credentials later to log into the virtual machine.</p><h4 id=step-2-import>Step 2) Import</h4><p>Import the downloaded .ova file into VirtualBox.</p><p>Just open up VirtualBox, click on <em>Import</em> and search for the .ova file on your computer. Click yourself through the import wizard, wait for the setup to finish and you are good to go.</p><h4 id=step-25-vm-configuration>Step 2.5) VM Configuration</h4><p>This step is not necessary but can be useful if you want to have a say in how much resources you are giving to your Kali VM.</p><p>Once the import is done VirtualBox will present the newly generated VM in its list of local VMs. Right click on the Kali VM and select <em>Settings</em>. This will open the settings menu where you can change a lot of configurations for the VM.</p><p>Under <em>System -> Motherboard</em> I like to change the Base Memory (which represents the amount of RAM you are giving to your VM) to 4096 MB. How much you can/should give depends on how much you have available on your actual system.</p><p>Under <em>System -> Processor</em> you can change the amount of processors you are willing to give to the VM. Generally I leave it at the default 2, however if you feel like your actual PC struggles with that you can lower it to 1.</p><p>This is everything I do in terms of VM configuration though you can tweak a lot more than that.</p><h4 id=step-3-login>Step 3) Login</h4><p>Now you can start the VM from within VirtualBox and after a few seconds you should be presented with Kali&rsquo;s login screen.</p><p>Here is where we can input the default credentials <em>kali/kali</em> given to us earlier to log into the machine.</p><p>Now this is where to real fun begins!</p><h4 id=step-4-add-new-user-and-delete-the-default-one>Step 4) Add new user and delete the default one</h4><p>It is not really necessary but definitely good practice to replace the default user and it makes me feel more at home.</p><p>All of this can easily be done from the command line like this:</p><ol><li>Create the new user: <code>sudo adduser &lt;new_username></code><ol><li>Provide a password for the new user and leave all the other information empty.</li><li>This will automatically generate a new directory under <em>/home/</em>.</li></ol></li><li>Give the new user sudo privileges: <code>sudo usermod -a -G sudo &lt;username></code></li><li>Log out of Kali and login again as the new user.</li><li>Delete the default user: <code>sudo userdel kali</code>.<ol><li>It is possible that you may have to restart the VM before you are able to do that.</li></ol></li><li>You can now safely delete the <em>kali</em> folder under <em>/home/kali</em>: <code>sudo rm -rd /home/kali</code></li></ol><h4 id=step-5-change-keyboard-layout>Step 5) Change keyboard layout</h4><p>Nothings worse than typing commands into the terminal while at the same time having to think in a different kezboard lazout.</p><p>Ok all jokes aside, since I am using a QWERTZ keyboard and not a QWERTY, which is the default for Kali, the first thing I do after changing user accounts is to go into the keyboard settings by opening the start menu, typing in <em>keyboard</em> and selecting a QWERTZ layout in my language from the <em>Layout</em> tab.</p><p>The only reason I did not do this before is because changing the user also resets your keyboard preferences.</p><h4 id=step-6-configure-aliases>Step 6) Configure aliases</h4><p>Command line aliases are great for setting up command shortcuts of regularly used commands you would otherwise have to type in entirely. Just make sure you do not forget what is behind the alias.</p><p>This is the content of my <code>.aliases</code> file in <code>~/.aliases</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias ls<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ls --color=always -arlht&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> apt-updater <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>   apt update <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>   apt dist-upgrade -Vy <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>   apt autoremove -y <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>   apt autoclean <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>   apt clean
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>The <code>ls</code> alias is to make calls to <code>ls</code> print out more detailed information on the directory I am currently in. Especially helpful when you want to see ALL files inside a directory and the color-encoding also helps to discern directories from files.</p><p>The <code>apt-updater</code> function is a quick and handy shortcut for keeping your Kali VM up to date. Just call it once a week and you can be sure that all your packages and applications are running on their latest version.</p><p>You could obviously create a lot more shortcuts, for example some <code>nmap</code> aliases that cut down lengthy <code>nmap</code> commands, but if you are just starting out with CTF challenges and Penetration Testing I would advice against it. You should first become familiar with the commands themselves before setting up aliases that abstract important handles and configurations away.</p><p>After you are done with the <code>.aliases</code> file we need to make sure that the aliases are loaded on shell start. For this add the following code to the end of the <code>.zshrc</code> (or <code>.bashrc</code> if you prefer bash) file in your user home directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f ~/.aliases <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    . ~/.aliases
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>Opening a new shell should now load in configured aliases automatically.</p><h4 id=step-7-update-repositories>Step 7) Update repositories</h4><p>After setting up the alias for updating your Kali VM I would advice you to do that now. Just call <code>apt-updater</code> from the command line and wait until <code>apt</code> is done with updating your machine.</p><p><em>This step can take <strong>A LOT</strong> of time depending on your internet connection and the resources you gave to the VM. Go grab a tea or coffee and take a break.</em></p><h4 id=step-8-install-a-terminal-multiplexer>Step 8) Install a Terminal Multiplexer</h4><p>Now that your repositories are up to date you can get started with installing new tools.</p><p>Kali&rsquo;s default terminal emulator does its job but is fairly basic in terms of features. Therefore I like to use a terminal emulator that gives you more configuration options, which is why I like to install <code>terminator</code> and tweak it to my liking, though there are many more if you prefer to find one yourself.</p><p>To install and configure <code>terminator</code> like I do follow these steps:</p><ol><li>Install <code>terminator</code> via <code>apt</code>: <code>sudo apt install terminator</code></li><li>Go into the start menu and type in <code>Default Applications</code></li><li>Under the <code>Utilities</code> tab you can find the entry for <code>Terminal Emulator</code>. Here you can select <code>Terminator</code> from the list and close the window again.</li><li>Opening a new terminal should now open a <code>Terminator</code>-styled terminal.</li><li>Right-click on the window and select <code>Preferences</code> from the context menu to open <code>Terminator's</code> configuration menu.</li><li>Under <code>Profiles</code><ol><li><code>General</code>: disable <code>Show titlebar</code></li><li><code>Scrolling</code>: enable <code>Infinite Scrollback</code></li></ol></li><li>Under <code>Keybindings</code><ol><li>Set <code>close_term</code> to <code>Ctrl+Super+X</code></li><li>Set <code>new_terminator</code> to <code>Ctrl+Alt+T</code></li><li>Set <code>split_horiz</code> to <code>Ctrl+Super+Down</code></li><li>Set <code>split_vert</code> to <code>Ctrl+Super+Right</code></li></ol></li></ol><p>Feel free to tweak more options to your liking until you feel comfortable with the configuration. Also it is going to take some time remembering all the keybindings but I can assure you that it is worth it!</p><h4 id=step-9-install-a-code-editor>Step 9) Install a Code Editor</h4><p>Kali comes pre-packaged with a fairly basic text editor and vim. However I like to work and code in Visual Studio Code, therefore I always add and install VS Code when setting up a new VM.</p><p>To follow along just type these commands into a terminal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install wget gpg
</span></span><span style=display:flex><span>wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor &gt; packages.microsoft.gpg
</span></span><span style=display:flex><span>sudo install -o root -g root -m <span style=color:#ae81ff>644</span> packages.microsoft.gpg /etc/apt/trusted.gpg.d/
</span></span><span style=display:flex><span>sudo sh -c <span style=color:#e6db74>&#39;echo &#34;deb [arch=amd64,arm64,armhf signed-by=/etc/apt/trusted.gpg.d/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main&#34; &gt; /etc/apt/sources.list.d/vscode.list&#39;</span>
</span></span><span style=display:flex><span>rm -f packages.microsoft.gpg
</span></span></code></pre></div><p>Then update the package cache and install VS Code like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install apt-transport-https
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install code
</span></span></code></pre></div><h4 id=step-10-change-ssh-keys>Step 10) Change SSH Keys</h4><p>Last but not least a little security best practice.</p><p>Kali comes with default SSH keys that could easily be used for intercepting communication when you are controlling something else over SSH, therefore it is recommended to change your SSH keys after setting up a new VM.</p><p>Just type in the following commands and you are done:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /etc/ssh/
</span></span><span style=display:flex><span>sudo rm -v /etc/ssh/ssh_host_*
</span></span><span style=display:flex><span>sudo dpkg-reconfigure openssh-server
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span></code></pre></div><h4 id=conclusion>Conclusion</h4><p>Congratulations! You just set up and configured your very own Kali virtual machine. You took the first step in becoming a real Cyber Security professional and you are good to go for the challenges that await you in the world of CTF and Penetration Testing. Once you familiarized yourself with this new environment try to change settings and configuration to your liking; make it your own, unique hacking machine.</p></section></article></main><footer class=site-footer><div class=inner><section class=copyright>©Schmid7k</section><section></section><section><a href=https://themes.gohugo.io/hugo-scroll/>Design</a> template
built with ♥️ by
<a href=https://www.janraasch.com title="Jan Raasch">Jan Raasch</a></section></div></footer><script type=text/javascript src=https://schmid7k.github.io/s-for-security/js/jquery-1.11.3.min.js></script>
<script type=text/javascript src=https://schmid7k.github.io/s-for-security/js/icons.js></script>
<script type=text/javascript src=https://schmid7k.github.io/s-for-security/js/index.js></script></body></html>